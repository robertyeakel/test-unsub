<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link href="index.css" rel="stylesheet" />
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <title>Subscription Preferences</title>
  </head>
  <body>
    <div class="data">
      <span>
        <input name="subscriptions" type="checkbox" value="daily-scoop" />
        <label for="subscriptions">Daily Scoop</label>
      </span>

      <span>
        <input
          name="subscriptions"
          type="checkbox"
          value="trading-stocks-updates-and-offers"
        />
        <label for="subscriptions">Trading Stocks Updates and Offers</label>
      </span>

      <span>
        <input
          name="subscriptions"
          type="checkbox"
          value="partner-offers-and-updates"
        />
        <label for="subscriptions">Partner Offers and Updates</label>
      </span>

      <span>
        <input name="subscriptions" type="checkbox" value="chart-alerts" />
        <label for="subscriptions">Chart Alerts</label>
      </span>

      <input
        type="button"
        onclick="(handleClick('subscriptions'));"
        value="Unsubscribe"
      />
    </div>

    <script>
      async function handleClick(checkboxName) {
        const checkboxes = document.querySelectorAll(
          'input[name="' + checkboxName + '"]:checked'
        );

        const values = [];
        checkboxes.forEach(function(el) {
          values.push(el.value);
        });

        const url = 'https://api.getvero.com/api/v2/users/tags/edit';
        const data = {
          auth_token: '',
          id: 'testing111@gmail.com',
          add: [`${values}`]
        };

        debugger;

        try {
          const response = await fetch(url, {
            method: 'PUT',
            body: JSON.stringify(data)
            // headers: {
            //   'Content-Type': 'application/json'
            // }
          });
          const json = await response.json();
          console.log('Success:', JSON.stringify(json));
        } catch (error) {
          console.error('Error:', error);
        }
      }
    </script>

    <script type="text/javascript" src="index.js"></script>
  </body>
</html>

<!-- Daily Scoop
Trading Stocks Updates and Offers
Partner Offers and Updates
Chart Alerts -->
